@{ Layout = "/Views/Shared/_Layout.cshtml"; }
@*@{Layout = "/Views/Shared/_index.cshtml";}*@
@model JooleUI.Models.LoginPage

@{
    ViewBag.Title = "Login";

}
@*<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">*@
<script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />

<link href="@Url.Content("~/Content/fileuploader.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/fileuploader.js")" type="text/javascript"></script>

@*<div class="d-flex flex-row-reverse">
    <a href="#signupModal" rel="modal:open" id="signupButton" onclick="handelSignUpClick();" class="btn btn-info" style="width:10em;margin-left:83%;margin-top:2rem;">Sign Up</a>
</div>*@

<div class="form-group row">
    <label for="signInUsername" class="col-md-3 col-form-label">Username: </label>
    <div class="col-md-9">
        <input type="text" class="form-control" id="signInUsername">
    </div>
</div>
<div class="form-group row">
    <label for="signInPassword" class="col-md-3 col-form-label">Password: </label>
    <div class="col-md-9">
        <input type="password" class="form-control" id="signInUsername">
    </div>
</div>
<div class="form-group form-check row">
    <label class="form-check-label col-md-9  offset-md-3" for="exampleCheck1">
        <input type="checkbox" class="form-check-input" id="exampleCheck1">Remember me
    </label>
</div>
<div class="form-group row">
    <div class="offset-md-3 col-md-9">
        <button type="submit" class="btn btn-primary ">Sign In</button>
    </div>
</div>
<div class="form-group row">
    <span class="offset-md-3 col-md-9">New to our website? @Html.ActionLink("Join Us", "SignUp", "Users")</span>
</div>

<div class="row">
    <img style="margin-top:6%;width:30%" src="~/Images/Joole.png" />
    <h3>Building Product Selection Platform</h3>
</div>

<div class="row">
    @using (Html.BeginForm("LoginPage", "User", FormMethod.Post))
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal" style="width:500px;display:inline-block;">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                <div style="text-align:center">
                    @Html.EditorFor(model => model.Login_Name, new { htmlAttributes = new { @class = "form-control", placeholder = "Username or email" } })
                    @Html.ValidationMessageFor(model => model.Login_Name, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <div style="text-align:center">
                    @Html.EditorFor(model => model.User_Password, new { htmlAttributes = new { @class = "form-control", placeholder = "Password" } })
                    @Html.ValidationMessageFor(model => model.User_Password, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                @Html.DisplayFor(model => model.LoginErrorMessage)
            </div>
            <div class="form-group">
                <div style="align-content:center;text-align:center">
                    <input type="submit" value="Submit" class="btn btn-primary" />
                </div>
            </div>
        </div>
    }
</div>

@*<div class="row">

    <form action="@Url.Action("FileUploads","User")" method="post" enctype="multipart/form-data">
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true);

        <div>
            @Html.LabelFor(model => model.RegisterUserImage)
            @Html.TextBoxFor(model => model.RegisterUserImage, new { type = "file" })
        </div>
        <div>
            @Html.TextBoxFor(model => model.RegisterUsername)
        </div>
        <div>
            @Html.TextBoxFor(model => model.RegisterEmail))
        </div>
        <div>
            @Html.PasswordFor(model => model.RegisterPassword)
        </div>
        <button type="submit">Create</button>
    </form>*@

    @*<h2>FileUpload</h2>

        @using (Html.BeginForm("FileUploads", "User", FormMethod.Post))
        {

            @Html.AntiForgeryToken()
            @Html.LabelFor(model => model.RegisterUserImage)
            @Html.TextBoxFor(model => model.RegisterUserImage, new { type = "file" })
            @Html.TextBoxFor(model => model.RegisterUsername)
            @Html.TextBoxFor(model => model.RegisterEmail)
            @Html.PasswordFor(model => model.RegisterPassword)
            <input type="submit" />

        }*@

    @*<form action="@Url.Action("FileUploads","User")" method="post" enctype="multipart/form-data">

                <label for="file1">Filename:</label>
                <input type="file" name="file1" id="file1" />

                <label for="file2">Filename:</label>
                <input type="file" name="file2" id="file2" />

                <label for="file3">Filename:</label>
                <input type="file" name="file3" id="file3" />

                <input type="submit" />

            </form>
        </div>*@


 
    <!-- Modal_Details -->
    <div id="signupModal" class="modal" style="width: auto; height: auto; padding: 0%;">
        <div class="card bg-light">
            <div class="card-header">
                <h5 id="modal_details_title" class="card-title"></h5>
                <h6 id="modal_details_subtitle" class="card-subtitle mb-2 text-muted"></h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-3">
                        <label>Location:</label>
                    </div>
                    <div class="col-9">
                        <p id="modal_details_location"> </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3">
                        <label>Phone:</label>
                    </div>
                    <div class="col-9">
                        <p id="modal_details_phone"> </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <hr>
                    </div>
                    <div class="col-auto">Address</div>
                    <div class="col">
                        <hr>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <label>Communication:</label>
                        <p id="modal_details_address_communication"></p>
                    </div>
                    <div class="col-6">
                        <label>Permanent:</label>
                        <p id="modal_details_address_permanent"></p>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <hr>
                    </div>
                    <div class="col-auto">Marks</div>
                    <div class="col">
                        <hr>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3">
                        <label>English:</label>
                        <p id="modal_details_marks_english"></p>
                    </div>
                    <div class="col-3">
                        <label>Science:</label>
                        <p id="modal_details_marks_science"></p>
                    </div>
                    <div class="col-3">
                        <label>Computers:</label>
                        <p id="modal_details_marks_computers"></p>
                    </div>
                    <div class="col-3">
                        <label>Hardware:</label>
                        <p id="modal_details_marks_hardware"></p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3 offset-9">
                        <a href="#" class="btn btn-primary" rel="modal:close">Close</a>
                    </div>

                </div>
            </div>
        </div>
    </div>

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval");
        <script>
        function handleCreateUserButton() {
            var uname = $("#usernameInput").val();
            var uemail = $("#userEmailInput").val();
            var upass = $("#userPasswordInput").val();
            var imgInputUrl = document.getElementById("img_input").files[0];
            var formData = new FormData();
            formData.append("img", imgInputUrl);

            $.ajax({
                data: {
                    'uname': uname,
                    'uemail': uemail,
                    'upass': upass
                    },
                    url: '@Url.Action("CreateUserRequest","User")',
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    success: function (data) {
                        var parsed = JSON.parse(data);
                        console.log(parsed);
                        alert("done");
                    },
                    error: () => { alert("error"); }
                });

        }
        </script>
    }





